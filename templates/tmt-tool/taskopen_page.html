{% extends 'base.html' %}
{% block title %}{{task.title}} | Revaa {% endblock %}
{% load static %}
{% block style %}
<link rel="stylesheet" href="{% static 'css/singile_project.css' %}">
{% endblock %}
{% block container %}
<link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<div class="d-flex">
    {% include 'includes/sidebar.html' %}
    <div class="content w-100">
        <div class="container">
            <div class="mt-3">
                {% include 'includes/message.html' %}
            </div>
            <div class=" d-flex align-items-center justify-content-between" style="height: 10vh;">
                <p class="fs-5 fw-bold m-0 p-0">{{task.title}}</p>
            </div>
            <div class="row">
                <div class="col-4">
                    <div class="container border rounded p-3">
                        <div class="d-flex align-items-center justify-content-between">
                            <p class="fs-5 fw-bold m-0 p-0">#{{task.pk}} Task Details </p>
                            <button class="btn btn-primary btn-sm" style="border-radius: 5px !important;">Alter Task</button>
                        </div>
                        
                        <hr>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Client :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.project}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Project :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.project}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Assignees :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.assigned_to}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Task type :</p>
                            </div>
                            <div class="col-6">
                                <p class="m-0 p-0 cs-alert-{{task.task_type.color | lower}}">{{task.task_type}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Priority :</p>
                            </div>
                            <div class="col-6">
                                <p class="m-0 p-0 
                                {% if task.priority == 'High' %}
                                cs-alert-danger
                                {% endif %}
                                ">{{task.priority}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Status :</p>
                            </div>
                            <div class="col-6">
                                <p class="m-0 p-0 cs-alert-{{task.status.color | lower}}">{{task.status}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">ETA :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.ETA}}</p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Start date time :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.start_date_time}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">End date time :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.start_date_time}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Assigned from :</p>
                            </div>
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">{{task.assigned_from}} </p>
                            </div>
                        </div>
                        <div class="row mt-3">
                            <div class="col-6">
                                <p class="fs-6 m-0 p-0">Attachment :</p>
                            </div>
                            <div class="col-6">
                                {% if task.attachment %}
                                <a href="{{task.attachment.url}}">Attachment</a>
                                {% else %}
                                <p class="fs-6 m-0 p-0">No attachment</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-8" style="overflow: auto; height: 85vh;">
                    <p class="fs-5 fw-bold m-0 p-0">Comments</p>
                    <p>{{task.description}}</p>
                    <ol class="timeline">
                        <li class="timeline-item">
                            <span class="timeline-item-icon | avatar-icon">
                                <i class="avatar">
                                    <img src="https://assets.codepen.io/285131/hat-man.png" />
                                </i>
                            </span>
                            <form action="" class="new-comment w-75 d-flex align-items-end">
                                <div class="me-2">
                                    <textarea name="" id="" placeholder="Add a comment..." class="form-control me-2" rows="2"></textarea>
                                    <input type="file" name="" id="" class="form-control mt-2">
                                </div>
                                <input type="submit" class="btn btn-primary btn-sm" style="border-radius: 5px !important;" value="Submit">
                            </form>
                        </li>
                        <li class="timeline-item d-flex align-items-start">
                            <span class="timeline-item-icon | faded-icon bg-gray">
                                <img src="https://assets.codepen.io/285131/hat-man.png" />
                            </span>
                            <div class="timeline-item-description border p-3 rounded ">
                                <span><a href="#" class="fw-semibold text-decoration-none text-primary">Luna Bonifacio</a> has changed Lorem ipsum dolor, sit amet consectetur adipisicing elit. At, enim natus cum porro fuga ea voluptatum similique molestiae incidunt, deserunt optio eaque sunt consequuntur assumenda maiores quibusdam beatae rerum ad? on <time class="text-muted">Jan 21, 2021</time></span>
                            </div>
                        </li>
                        <li class="timeline-item d-flex align-items-start">
                            <span class="timeline-item-icon | faded-icon bg-gray">
                                <img src="https://assets.codepen.io/285131/hat-man.png" />
                            </span>
                            <div class="timeline-item-description border p-3 rounded ">
                                <span><a href="#" class="fw-semibold text-decoration-none text-primary">Luna Bonifacio</a> has changed Lorem ipsum dolor, sit amet consectetur adipisicing elit. At, enim natus cum porro fuga ea voluptatum similique molestiae incidunt, deserunt optio eaque sunt consequuntur assumenda maiores quibusdam beatae rerum ad? on <time class="text-muted">Jan 21, 2021</time></span>
                            </div>
                        </li>
                    </ol>
                    <style>
                        img {
                            max-width: 100%;
                        }

                        .timeline {
                            width: 85%;
                            max-width: 700px;
                            margin-left: auto;
                            margin-right: auto;
                            display: flex;
                            flex-direction: column;
                            padding: 32px 0 32px 32px;
                            border-left: 2px solid rgb(218, 218, 218);
                            font-size: 1.125rem;
                        }

                        .timeline-item {
                            display: flex;
                            gap: 8px;

                            &+* {
                                margin-top: 30px;
                            }

                            &+.extra-space {
                                margin-top: 48px;
                            }
                        }

                        .timeline-item-icon {
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            width: 40px;
                            height: 40px;
                            border-radius: 50%;
                            margin-left: -52px;
                            flex-shrink: 0;
                            overflow: hidden;
                            box-shadow: 0 0 0 6px #fff;

                            svg {
                                width: 20px;
                                height: 20px;
                            }

                            &.faded-icon {
                                background-color: var(--c-grey-100);
                                color: var(--c-grey-400);
                            }

                            &.filled-icon {
                                background-color: var(--c-blue-500);
                                color: #fff;
                            }
                        }

                        .avatar {
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            border-radius: 50%;
                            overflow: hidden;
                            aspect-ratio: 1 / 1;
                            flex-shrink: 0;
                            width: 40px;
                            height: 40px;

                            &.small {
                                width: 28px;
                                height: 28px;
                            }

                            img {
                                object-fit: cover;
                            }
                        }
                    </style>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block script %}
{% endblock %}